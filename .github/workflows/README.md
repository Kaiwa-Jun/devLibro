# DevLibro GitHub Actions ワークフロー

このプロジェクトでは、以下のGitHub Actionsワークフローを使用しています。

## 1. テスト実行 (`test.yml`)

基本的なテストワークフローです。

**トリガー:**
- プッシュ (main, develop)
- プルリクエスト (main, develop)

**機能:**
- ESLintによるコードリント
- Jestによるテスト実行
- Next.jsビルド検証
- テストカバレッジの保存

## 2. CI/CD ワークフロー (`ci-cd.yml`)

拡張されたCI/CDワークフローです。

**トリガー:**
- プッシュ (main, develop)
- プルリクエスト (main, develop)
- 手動トリガー (ワークフロー・ディスパッチ)

**機能:**
- ESLintによるコードリント
- Jestによるテスト実行
- テストカバレッジのアーティファクト保存
- PRコメントとしてテストカバレッジを表示
- Next.jsビルド検証
- 開発環境へのデプロイ (develop ブランチへのプッシュ時、または手動トリガー時)

## 環境変数・シークレット情報

以下の環境変数/シークレットを使用します：

- `GITHUB_TOKEN`: GitHub提供の自動トークン。PRコメントの投稿などに使用
- `VERCEL_TOKEN`: Vercelへのデプロイに使用
- `VERCEL_ORG_ID`: Vercel組織IDを設定
- `VERCEL_PROJECT_ID`: Vercelプロジェクトを設定

## キャッシュの活用

ビルド時間を短縮するために以下のキャッシュを活用しています：

- Node.jsモジュールのキャッシュ

## 注意点

- ワークフローでは Node.js 18.x を使用しています
- デプロイ設定はプロジェクトの状況に応じて適宜変更してください
- テストカバレッジレポートはPRのコメントとして自動的に追加されます

## 既知の問題と対応方法

### Radix UIコンポーネントのビルドエラー

プロファイルページの実装において、Radix UIコンポーネントのバージョン互換性によるビルドエラーが発生しています。現在は一時的に簡易版のプロファイルページを使用してビルドを成功させています。

**対応方法:**
1. `next.config.js`でRadix UIパッケージをトランスパイル対象に追加
2. 問題の発生しているコンポーネントを簡易版に置き換え
3. 根本的な解決としてはRadix UIのバージョンを互換性のあるものに更新する必要があります

将来的には、Radix UIコンポーネントの問題を解決し、完全なプロファイルページ機能を実装する予定です

テストのための修正